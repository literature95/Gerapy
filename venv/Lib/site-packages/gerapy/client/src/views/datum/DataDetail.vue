<template>
    <div class="detail-container">
      <el-card v-loading="loading">
        <div slot="header" class="clearfix">
          <span>数据详情</span>
          <el-button style="float: right; padding: 3px 0" type="text" @click="goBack">
            返回列表
          </el-button>
        </div>
        
        <div v-if="currentData" class="detail-content">
          <el-descriptions :column="2" border>
            <el-descriptions-item label="ID">{{ currentData.id }}</el-descriptions-item>
            <el-descriptions-item label="名称">{{ currentData.name }}</el-descriptions-item>
            <el-descriptions-item label="描述">{{ currentData.description }}</el-descriptions-item>
            <el-descriptions-item label="创建时间">
              {{ currentData.created_at | formatDate }}
            </el-descriptions-item>
            <!-- 根据您的数据结构添加更多字段 -->
          </el-descriptions>
          
          <!-- 可以添加更多数据可视化组件，如图表等 -->
          <div class="chart-container" v-if="currentData.chartData">
            <!-- 使用 ECharts 或其他图表库 -->
            <div ref="chart" style="width: 100%; height: 400px;"></div>
          </div>
        </div>
        
        <div v-else class="empty-data">
          <p>暂无数据</p>
        </div>
      </el-card>
    </div>
  </template>
  
  <script>
  import { mapState, mapActions } from 'vuex'
  // 如果需要图表，引入相关库
  // import * as echarts from 'echarts'
  
  export default {
    name: 'DataDetail',
    filters: {
      formatDate(time) {
        return new Date(time).toLocaleString()
      }
    },
    data() {
      return {
        // chart: null
      }
    },
    computed: {
      ...mapState('data', ['currentData', 'loading'])
    },
    created() {
      const id = this.$route.params.id
      if (id) {
        this.fetchDataDetail(id)
      }
    },
    mounted() {
      // 如果需要初始化图表
      // this.initChart()
    },
    methods: {
      ...mapActions('data', { fetchDataDetail: 'getDataDetail' }),
      
      goBack() {
        this.$router.push('/data/list')
      },
      
      // 如果需要图表
      // initChart() {
      //   if (this.currentData && this.currentData.chartData) {
      //     this.chart = echarts.init(this.$refs.chart)
      //     // 配置图表选项
      //     const option = {
      //       // 根据您的数据配置图表
      //     }
      //     this.chart.setOption(option)
      //   }
      // }
    }
  }
  </script>
  
  <style scoped>
  .detail-container {
    padding: 20px;
  }
  .detail-content {
    margin-top: 20px;
  }
  .chart-container {
    margin-top: 30px;
  }
  .empty-data {
    text-align: center;
    padding: 30px 0;
    color: #909399;
  }
  </style>